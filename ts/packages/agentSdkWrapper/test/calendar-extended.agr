// Copyright (c) 2024 Assistant AI. All rights reserved.
// Calendar Management Action Grammar

// Start rule - references all action rules by exact action names
<Start> = <scheduleEvent> | <findEvents> | <addParticipant> | <findTodaysEvents> | <findThisWeeksEvents>;

// Action rules (using exact action names)
<scheduleEvent> = <Polite> ('schedule' | 'set up' | 'book' | 'create' | 'add') <EventDescription> <DateSpec> <TimeSpec>? <LocationSpec>? <ParticipantSpec>? -> { actionName: "scheduleEvent", parameters: { description, date, time, location, participant } };

<findEvents> = <Polite> ('find' | 'show me' | 'get' | 'search for' | 'look for' | 'pull up') ('events' | 'meetings' | 'appointments' | 'calendar entries')? <EventDescriptionFilter>? <DateSpec>? <ParticipantFilter>? -> { actionName: "findEvents", parameters: { description, date, participant } };

<addParticipant> = <Polite> ('add' | 'invite' | 'include' | 'bring in') <ParticipantName> ('to' | 'in' | 'on') <EventDescriptionTarget> -> { actionName: "addParticipant", parameters: { description, participant } };

<findTodaysEvents> = <Polite> ('show me' | 'find' | 'get' | 'what is' | 'what\'s' | 'tell me' | 'can you tell me') ('on my calendar'? 'today' | 'today\'s' ('events' | 'schedule' | 'calendar' | 'meetings' | 'appointments')? | ('what I have' | 'what\'s scheduled') ('for'? 'today')) -> { actionName: "findTodaysEvents", parameters: {} };

<findThisWeeksEvents> = <Polite> ('show me' | 'find' | 'get' | 'what is' | 'what\'s' | 'tell me') ('on my calendar'? ('this week' | 'for this week') | 'this week\'s' ('events' | 'schedule' | 'calendar' | 'meetings' | 'appointments')?) -> { actionName: "findThisWeeksEvents", parameters: {} };

// Shared sub-rules
<Polite> = ('can you' | 'please' | 'would you' | 'could you')?;

<EventDescription> = ('a' | 'an' | 'my')? $(description:string) ('meeting' | 'event' | 'appointment')?;

<EventDescriptionFilter> = (('all' | 'any')? ('meetings' | 'events' | 'appointments' | 'calendar entries') ('with' | 'about' | 'for' | 'that have anything to do with')? $(description:string)) | ($(description:string) ('meeting' | 'event' | 'appointment')?);

<EventDescriptionTarget> = ('the' | 'my')? $(description:string) ('meeting' | 'event' | 'appointment')?;

<DateSpec> = ('on' | 'for') $(date:CalendarDate);

<TimeSpec> = ('at' | 'from') <TimeExpression>;

<TimeExpression> = $(time:CalendarTime) | $(time:CalendarTimeRange);

<LocationSpec> = ('in' | 'at' | 'location') ($(location:string) | 'TBD');

<ParticipantSpec> = ('please'? ('invite' | 'include' | 'bring in') | 'with') <ParticipantList>;

<ParticipantList> = $(participant:string) ((',' | 'and') $(participant:string))*;

<ParticipantFilter> = ('with' | 'including') <ParticipantName>;

<ParticipantName> = $(participant:string);